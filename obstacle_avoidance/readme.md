# 自动避障输出接口解释

2024.10.27 第二版
相比于第一版，修改了轮廓点输出为关键轮廓点输出，obstacle类中的contour输出为相机坐标系下的x,y,z集合

2024.11.18 第三版

针对测距精度做了调整，目前对于墙面的测距可以实现1m - 3.5m的准确测距，1m内会发生跳变
，对障碍物输出更改为聚类，速度达到0.7s

## 项目介绍

关于自动避障的信息输出

## 环境依赖

相机标定文件：camera_configs.py

## 使用说明

调用 obstacle_depth.py 文件中的 class frame_obstacles 类，通过类的初始化获得避障信息输出，见具体示例 try_call.py

### 障碍物类 obstacle


| 名称             | 类型        | 意义                                                                                                                                                                                                 |
| ---------------- | ----------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| id               | int         | 唯一标识符，用于区分不同的对象                                                                                                                                                                       |
| area             | float       | 对象的面积，单位$ mm^2 $                                                                                                                                                                             |
| center_xyz_world | tuple       | 对象在世界坐标系中心点的坐标(x,y,z)mm                                                                                                                                                                |
| contour          | list[tuple] | 对象的轮廓点相机坐标系下的(x,y,z)集合，用于描述形状                                                                                                                                                  |
| angle            | float       | 对象的方向角度，通常相对于某一基准方向 公式$ \left( \arctan \frac{y_2 - y_1}{x_1 - x_2}, \arctan \frac{x_2 - x_1}{y_2 - y_1}, arctan \frac{z_2 - z_1}{\sqrt{(x_2 - x_1)^2 + (y_2 - y_1)^2}}\right) $ |

### 帧障碍物类 frame_obstacles

**入参：**

* frame: 未作任何处理的双目图像
* show_depth: 是否显示深度图的布尔值，默认为false
* show_obstacle:  是否对障碍物的轮廓进行可视化，默认为false

**属性表：**


| 名称                 | 类型 | 意义                   |
| -------------------- | ---- | ---------------------- |
| show_depth           | bool | 是否显示深度信息可视化 |
| show_obstacle        | bool | 是否显示障碍物可视化   |
| obstacles            | list | 存储障碍物类的列表     |
| frame_obstacles_size | int  | 当前帧中障碍物的数量   |
